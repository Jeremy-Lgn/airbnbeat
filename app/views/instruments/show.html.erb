<div data-controller="lightbox">
  <% if @instrument.photos.any? %>
    <div class="col-md-6">
      <div class="border p-3 m-0">
        <%= cl_image_tag(@instrument.photos.first.key, width: 600, height: 360, crop: "scale", data: { action: "click->lightbox#open" }) %>
      </div>
    </div>

    <% if @instrument.photos.length > 1 %>
      <div class="col-md-6 d-flex flex-wrap">
        <% @instrument.photos.each_with_index do |photo, index| %>
          <div class="border p-3 m-0">
            <%= cl_image_tag(photo.key, width: 260, height: 170, crop: "scale", data: { action: "click->lightbox#open" }) %>
          </div>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <div class="col-md-12">
      <%= image_tag "default_instrument.jpg", width: 600, height: 360, crop: "scale" %>
    </div>
  <% end %>

<div data-lightbox-target="overlay" data-action="click->lightbox#close" class="lightbox-overlay hidden">
  <img data-lightbox-target="image" src="" data-action="click->lightbox#stopPropagation" />
  <button data-action="click->lightbox#close" class="lightbox-close">Ã—</button>
</div>
